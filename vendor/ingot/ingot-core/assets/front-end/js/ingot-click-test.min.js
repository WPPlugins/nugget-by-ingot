jQuery(document).ready(function(a){var b=INGOT_UI.session.ID,c=INGOT_UI.session.ingot_ID,d=INGOT_UI.session_nonce,e=INGOT_UI.nonce,f=INGOT_UI.api_url;!function(){function c(a){var b=a.target,c=b.getAttribute("href"),d=b.getAttribute("data-ingot-test-id");"undefined"!=c&&null!=c&&(a.preventDefault(),null!=d?g(d,c):h(c))}function g(c,g){var h={id:c,ingot_session_nonce:d,ingot_session_ID:b},i=f+"variants/"+c+"/conversion?_wpnonce="+e+"&ingot_session_nonce="+d+"&ingot_session_ID="+b;a.when(a.ajax({url:i,method:"POST",data:h,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",e)}}).success(function(a,b,c){window.location=g}).error(function(){window.location=g}).fail(function(){window.location=g}))}function h(c){var g=f+"sessions/"+b+"/track?_wpnonce="+e+"&ingot_session_nonce="+d+"&ingot_session_ID="+b,h={ingot_session_nonce:d,click_url:c};a.when(a.ajax({url:g,method:"POST",data:h,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",e)}}).success(function(a,b,d){window.location=c}).error(function(){window.location=c}).fail(function(){window.location=c}))}a(document).on("click",null,a,c)}(),function(){function g(a){var b,c=0;if(0<a.add.length)for(b=v.add.keys(),c=0;c<=a.add.length;c++)Cookies.add(q+a.keys[c],a.add[c],{path:v.path,domain:v.domain});if(0<a.remove.length)for(b=a.remove.keys(),c=0;c<=a.remove.length;c++)Cookies.remove(q+a.keys[c]);if(0<a.add.wrong_variant)for(b=a.wrong_variant.keys(),c=0;c<=a.add.length;c++)Cookies.remove(q+a.keys[c]),Cookies.add(q+a.keys[c],a.add[c],{path:a.path,domain:a.domain})}function h(){a.when(a.ajax({url:f+"sessions/"+b+"/cookies?_wpnonce="+e+"&ingot_session_nonce="+d+"&ingot_session_ID="+b,method:"POST",data:{ingot_session_nonce:d,cookies:r},beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",e)}})).then(function(a){g(a)})}var i,j,k,l=[],m=a(".ingot-test"),n=m.length,o=Cookies.get(),p=Object.keys(o),q="ingot_destination_",r=[];if(0<p.length){var s,t;for(k=0;k<=p.length;k++)s=p[k],void 0!=s&&s.startsWith(q)&&(t=o[p[k]],r.push({g:s.replace(q,""),v:t}))}if(0!=n)for(k=0;n>=k;k++)j=m[k],"undefined"!=j&&null!=j&&(i=j.getAttribute("data-ingot-test-id"),null!=i&&l.push(i));if(0!=l.length){var u=f+"sessions/"+b+"/tests/?ingot_session_nonce="+d+"&ingot_session_ID="+b,v={ingot_session_nonce:d,test_ids:l,ingot_id:c,cookies:r};a.when(a.ajax({url:u,method:"POST",data:v,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",e)}})).then(function(d,e,f){var h=d.tests;if(g(d.cookies),"undefined"!=h&&0<h.length){var i,j,k;a.each(h,function(a,b){i=b.ID,j=b.html,k=document.getElementById("ingot-test-"+i),null!=k&&""!=j&&(k.parentNode.innerHTML=j)})}c=d.ingot_ID,b=d.session_ID})}else h()}()});